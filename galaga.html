<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaga</title>
<style>
body { margin:0; background:#000; overflow:hidden; }
canvas { display:block; margin:0 auto; background:#000; }
</style>
</head>
<body>
<canvas id="game" width="800" height="600"></canvas>
<script>
const SCREEN_WIDTH = 800;
const SCREEN_HEIGHT = 600;
const PLAYER_SPEED = 5;
const BULLET_SPEED = -7;
const ENEMY_SPEED = 2;
const CAPTURE_SPEED = 2;
const DIVE_SPEED = 3;
const DIVE_PROBABILITY = 0.005;
const ENEMY_BULLET_SPEED = 4;
const CAPTURE_ALIGN_DISTANCE = 30;

function loadImage(base64) {
  return new Promise(r => {
    const img = new Image();
    img.onload = () => r(img);
    img.src = 'data:image/svg+xml;base64,' + base64.trim();
  });
}

const assets = {};
Promise.all([
  loadImage(`PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpvc2I9Imh0dHA6Ly93d3cub3BlbnN3YXRjaGJvb2sub3JnL3VyaS8yMDA5L29zYiIKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSI1MTIiCiAgIGhlaWdodD0iNTEyIgogICBpZD0ic3ZnMiIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ4LjAgcjk2NTQiCiAgIHNvZGlwb2RpOmRvY25hbWU9InN0YXJzaGlwLnN2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ1MTEzIj4KICAgICAgPHN0b3AKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmMTkwMDtzdG9wLW9wYWNpdHk6MTsiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgaWQ9InN0b3A1MTE1IiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDUxMjEiCiAgICAgICAgIG9mZnNldD0iMSIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmZmYwMDtzdG9wLW9wYWNpdHk6MDsiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ5MDgzIj4KICAgICAgPHN0b3AKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzAwMDAwMDtzdG9wLW9wYWNpdHk6MTsiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgaWQ9InN0b3A5MDg1IiAvPgogICAgICA8c3RvcAogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMDAwMDAwO3N0b3Atb3BhY2l0eTowOyIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBpZD0ic3RvcDkwODciIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ2NTc3IgogICAgICAgb3NiOnBhaW50PSJzb2xpZCI+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiMwMDAwMDA7c3RvcC1vcGFjaXR5OjE7IgogICAgICAgICBvZmZzZXQ9IjAiCiAgICAgICAgIGlkPSJzdG9wNjU3OSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDM4OTAiPgogICAgICA8c3RvcAogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMzIzMjMyO3N0b3Atb3BhY2l0eToxOyIKICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAgICBpZD0ic3RvcDM4OTIiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMzkwMCIKICAgICAgICAgb2Zmc2V0PSIwLjIiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiM0YjRiNGI7c3RvcC1vcGFjaXR5OjE7IiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDM4OTgiCiAgICAgICAgIG9mZnNldD0iMC41IgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojNjQ2NDY0O3N0b3Atb3BhY2l0eToxOyIgLz4KICAgICAgPHN0b3AKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzRiNGI0YjtzdG9wLW9wYWNpdHk6MTsiCiAgICAgICAgIG9mZnNldD0iMC44MDAwMDAwMSIKICAgICAgICAgaWQ9InN0b3AzOTAyIiAvPgogICAgICA8c3RvcAogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMzIzMjMyO3N0b3Atb3BhY2l0eToxOyIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBpZD0ic3RvcDM4OTQiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQzODQ2Ij4KICAgICAgPHN0b3AKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6Izk2OTY5NjtzdG9wLW9wYWNpdHk6MTsiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgaWQ9InN0b3AzODQ4IiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDM4ODgiCiAgICAgICAgIG9mZnNldD0iMC4zNDg1NzE0MiIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2M4YzhjODtzdG9wLW9wYWNpdHk6MTsiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjE7IgogICAgICAgICBvZmZzZXQ9IjEiCiAgICAgICAgIGlkPSJzdG9wMzg1MCIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDM3OTMiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDM4MDEiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzAwZmZmZjtzdG9wLW9wYWNpdHk6MTsiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiMwMDAwZmY7c3RvcC1vcGFjaXR5OjE7IgogICAgICAgICBvZmZzZXQ9IjEiCiAgICAgICAgIGlkPSJzdG9wMzc5NyIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyCiAgICAgICBpZD0iZmlsdGVyMzgyMCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJNb3Rpb24gYmx1ciwgdmVydGljYWwiCiAgICAgICBpbmtzY2FwZTptZW51PSJCbHVycyIKICAgICAgIGlua3NjYXBlOm1lbnUtdG9vbHRpcD0iQmx1ciBhcyBpZiB0aGUgb2JqZWN0IGZsaWVzIHZlcnRpY2FsbHk7IGFkanVzdCBTdGFuZGFyZCBEZXZpYXRpb24gdG8gdmFyeSBmb3JjZSIKICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CiAgICAgIDxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXIzODIyIgogICAgICAgICBzdGREZXZpYXRpb249IjMiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljIiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpY0FscGhhIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODM0IiAvPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyMzgzNiIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjAxIDUiIC8+CiAgICA8L2ZpbHRlcj4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICAgeGxpbms6aHJlZj0iI2xpbmVhckdyYWRpZW50Mzg0NiIKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDM4NTgiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIHNwcmVhZE1ldGhvZD0icGFkIgogICAgICAgeDE9IjI1NS41IgogICAgICAgeTE9IjI1NiIKICAgICAgIHgyPSI0NDguNSIKICAgICAgIHkyPSIyNTYiIC8+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4OTAiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQzODk2IgogICAgICAgeDE9IjI4Ny4xNzEyNyIKICAgICAgIHkxPSIzODIuMTY0MzciCiAgICAgICB4Mj0iMzM2LjY5NzUzIgogICAgICAgeTI9IjM4Mi4xNjQzNyIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiAvPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQzODkwIgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MzgxOSIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeDE9IjQwNy41IgogICAgICAgeTE9Ijg1Mi4zNjIxOCIKICAgICAgIHgyPSI0MTYuNSIKICAgICAgIHkyPSI4NTIuMzYyMTgiIC8+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4OTAiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQzODMzIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCwtNjQpIgogICAgICAgeDE9IjQwNy41IgogICAgICAgeTE9Ijg1Mi4zNjIxOCIKICAgICAgIHgyPSI0MTYuNSIKICAgICAgIHkyPSI4NTIuMzYyMTgiIC8+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDkwODMiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ5NDM1IgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC04LC0zMikiCiAgICAgICB4MT0iMjcyIgogICAgICAgeTE9IjczMi4zNjIxOCIKICAgICAgIHgyPSIyNzIiCiAgICAgICB5Mj0iNzE2LjM2MjE4IiAvPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQzNzkzIgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MzgzMCIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeDE9IjI1NS41IgogICAgICAgeTE9IjI4OCIKICAgICAgIHgyPSIyODkuNDA2OCIKICAgICAgIHkyPSIyODgiIC8+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM3OTMiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQzODMyIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB4MT0iMjk1LjkwMjEzIgogICAgICAgeTE9IjQyNCIKICAgICAgIHgyPSIzMjguNjg3MDQiCiAgICAgICB5Mj0iNDI0IiAvPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQzODQ2IgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MzA2OSIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgc3ByZWFkTWV0aG9kPSJwYWQiCiAgICAgICB4MT0iMjU1LjUiCiAgICAgICB5MT0iMjU2IgogICAgICAgeDI9IjQ0OC41IgogICAgICAgeTI9IjI1NiIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLTEsMCwwLDEsNTEyLDU0MC4zNjIxOCkiIC8+CiAgICA8cmFkaWFsR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDUxMTMiCiAgICAgICBpZD0icmFkaWFsR3JhZGllbnQzODM5IgogICAgICAgY3g9IjI1NiIKICAgICAgIGN5PSIyNTYiCiAgICAgICBmeD0iMjU2IgogICAgICAgZnk9IjI1NiIKICAgICAgIHI9IjE2MCIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiAvPgogICAgPGZpbHRlcgogICAgICAgaWQ9ImZpbHRlcjM4NTciCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iU2ltcGxlIGJsdXIiCiAgICAgICBpbmtzY2FwZTptZW51PSJBQkNzIgogICAgICAgaW5rc2NhcGU6bWVudS10b29sdGlwPSJTaW1wbGUgR2F1c3NpYW4gYmx1ciwgc2FtZSBhcyB0aGUgYmx1ciBzbGlkZXIgaW4gRmlsbCBhbmQgU3Ryb2tlIGRpYWxvZyIKICAgICAgIGhlaWdodD0iMS40IgogICAgICAgeT0iLTAuMiIKICAgICAgIHdpZHRoPSIxLjQiCiAgICAgICB4PSItMC4yIgogICAgICAgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICBpZD0iZmVUdXJidWxlbmNlMzg1OSIKICAgICAgICAgYmFzZUZyZXF1ZW5jeT0iMC4wNSIKICAgICAgICAgbnVtT2N0YXZlcz0iNSIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICByZXN1bHQ9InJlc3VsdDkxIiAvPgogICAgICA8ZmVEaXNwbGFjZW1lbnRNYXAKICAgICAgICAgaWQ9ImZlRGlzcGxhY2VtZW50TWFwMzg2MSIKICAgICAgICAgaW4yPSJyZXN1bHQ5MSIKICAgICAgICAgc2NhbGU9IjI1IgogICAgICAgICByZXN1bHQ9InJlc3VsdDUiCiAgICAgICAgIHhDaGFubmVsU2VsZWN0b3I9IlIiCiAgICAgICAgIGluPSJTb3VyY2VHcmFwaGljIiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlMzg2MyIKICAgICAgICAgaW4yPSJyZXN1bHQ1IgogICAgICAgICBpbj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgb3BlcmF0b3I9ImF0b3AiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljIiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpY0FscGhhIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODcxIiAvPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyMzg3MyIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIzIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIiAvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSIxIgogICAgIGlua3NjYXBlOmN4PSI0MjIuNSIKICAgICBpbmtzY2FwZTpjeT0iMjI4Ljk0ODkyIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgYm9yZGVybGF5ZXI9ImZhbHNlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIHNob3dndWlkZXM9InRydWUiCiAgICAgaW5rc2NhcGU6Z3VpZGUtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE0NDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODIzIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIyNCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBpZD0iZ3JpZDI5ODUiCiAgICAgICBlbXBzcGFjaW5nPSIxNiIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIgogICAgICAgc25hcHZpc2libGVncmlkbGluZXNvbmx5PSJ0cnVlIiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iMSwwIgogICAgICAgcG9zaXRpb249IjI1NiwyNTYiCiAgICAgICBpZD0iZ3VpZGUyOTg3IiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iMCwxIgogICAgICAgcG9zaXRpb249IjI1NiwyNTYiCiAgICAgICBpZD0iZ3VpZGUyOTg5IiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iLTAuNzA3MTA2NzgsMC43MDcxMDY3OCIKICAgICAgIHBvc2l0aW9uPSIyNTYsMjU2IgogICAgICAgaWQ9Imd1aWRlMjk5MSIgLz4KICAgIDxzb2RpcG9kaTpndWlkZQogICAgICAgb3JpZW50YXRpb249Ii0wLjcwNzEwNjc4LC0wLjcwNzEwNjc4IgogICAgICAgcG9zaXRpb249IjY0LDQ0OCIKICAgICAgIGlkPSJndWlkZTI5OTMiIC8+CiAgICA8c29kaXBvZGk6Z3VpZGUKICAgICAgIG9yaWVudGF0aW9uPSItMC43MDcxMDY3OCwwLjcwNzEwNjc4IgogICAgICAgcG9zaXRpb249IjM4NCwxMjgiCiAgICAgICBpZD0iZ3VpZGUyOTk3IiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iLTAuNzA3MTA2NzgsMC43MDcxMDY3OCIKICAgICAgIHBvc2l0aW9uPSIxMjgsMzg0IgogICAgICAgaWQ9Imd1aWRlMjk5OSIgLz4KICAgIDxzb2RpcG9kaTpndWlkZQogICAgICAgb3JpZW50YXRpb249Ii0wLjcwNzEwNjc4LC0wLjcwNzEwNjc4IgogICAgICAgcG9zaXRpb249IjM4NCwzODQiCiAgICAgICBpZD0iZ3VpZGUzMDAxIiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iLTAuNzA3MTA2NzgsLTAuNzA3MTA2NzgiCiAgICAgICBwb3NpdGlvbj0iMTI4LDEyOCIKICAgICAgIGlkPSJndWlkZTMwMDMiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iRWJlbmUgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNTQwLjM2MjE4KSI+CiAgICA8ZwogICAgICAgaWQ9InN0YXJzaGlwIgogICAgICAgc3R5bGU9InZpc2liaWxpdHk6dmlzaWJsZSI+CiAgICAgIDxnCiAgICAgICAgIGlkPSJqZXQiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDM4MzIpO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO2ZpbHRlcjp1cmwoI2ZpbHRlcjM4MjApIgogICAgICAgICAgIGQ9Im0gMjk3LDQwMCAzMSwwIGMgMS43OTYyMywxNS4xNzYyMSAtOS44MDg2LDMxLjk3NjggLTE1LDQ4IC01LjM2Njk2LC0xNS45OTI0MyAtMTkuNjgyNDUsLTI5Ljk3MTQ1IC0xNiwtNDgiCiAgICAgICAgICAgaWQ9InBhdGgzMDIzIgogICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw1NDAuMzYyMTgpIgogICAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjYyIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgeD0iMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoMzAyMyIKICAgICAgICAgICBpZD0idXNlMzgwMyIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMSwwLDAsMSw1MTIuNTg5MTYsMCkiCiAgICAgICAgICAgd2lkdGg9IjUxMiIKICAgICAgICAgICBoZWlnaHQ9IjUxMiIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0iZW5naW5lcyI+CiAgICAgICAgPHVzZQogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB4bGluazpocmVmPSIjcGF0aDM5MjYiCiAgICAgICAgICAgaWQ9InVzZTM5MjgiCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLTEsMCwwLDEsNTEyLDApIgogICAgICAgICAgIHdpZHRoPSI1MTIiCiAgICAgICAgICAgaGVpZ2h0PSI1MTIiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50Mzg5Nik7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICAgIGQ9Im0gMzEyLDQxNiBjIDI4LDAgMjQsNSAyNCwtMjQgbCAwLC0yNCAtMjQsLTE2IC0yMywtNCBjIC0wLjAwOSwxMS4zMzQ0MSAtMC44MDEyMSwzMi42NjY3MyAtMSw0NCAwLDI4IC01LDI0IDI0LDI0IHoiCiAgICAgICAgICAgaWQ9InBhdGgzOTI2IgogICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw1NDAuMzYyMTgpIgogICAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjYyIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0ibGFzZXJzIj4KICAgICAgICA8cGF0aAogICAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjYyIKICAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50MzgxOSk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICAgIGQ9Im0gNDA4LDc5Ni4zNjIxOCA0LDAgNCwwIDAsMTcgLTIsNyAyLDg4IC04LDAgMiwtODggLTIsLTcgeiIKICAgICAgICAgICBpZD0icGF0aDM5MTQiCiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgeD0iMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoMzkxNCIKICAgICAgICAgICBpZD0idXNlMzkxNiIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMSwwLDAsMSw1MDQsMCkiCiAgICAgICAgICAgd2lkdGg9IjUxMiIKICAgICAgICAgICBoZWlnaHQ9IjUxMiIgLz4KICAgICAgICA8ZwogICAgICAgICAgIGlkPSJnMzgzNSI+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjY2NjIgogICAgICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDM4MzMpO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICAgICAgICBkPSJtIDM0OCw3MzIuMzYyMTggNCwwIDQsMCAwLDE3IC0yLDcgMiw4OCAtOCwwIDIsLTg4IC0yLC03IHoiCiAgICAgICAgICAgICBpZD0icGF0aDM4MjEiCiAgICAgICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogICAgICAgICAgPHVzZQogICAgICAgICAgICAgeD0iMCIKICAgICAgICAgICAgIHk9IjAiCiAgICAgICAgICAgICB4bGluazpocmVmPSIjcGF0aDM4MjEiCiAgICAgICAgICAgICBpZD0idXNlMzgyNSIKICAgICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC0xLDAsMCwxLDUxMiwwKSIKICAgICAgICAgICAgIHdpZHRoPSI1MTIiCiAgICAgICAgICAgICBoZWlnaHQ9IjUxMiIgLz4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgICAgPGcKICAgICAgICAgaWQ9Imh1bGwiPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICBpZD0icGF0aDMxMzQiCiAgICAgICAgICAgZD0ibSAyNTYsNjQgNiwwIGMgNDIsOTYgMzguODU1OSwxMzguNjYyMzcgNTgsMjA4IGwgMTEyLDk2IDE2LDgwIC03LDAgLTI1LC00OCAtMTIwLC00OCBjIC04LDY0IC00MCw2NCAtNDAsOTYiCiAgICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDM4NTgpO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjY2NjYyIKICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDU0MC4zNjIxOCkiIC8+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjY2NjYyIKICAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50MzA2OSk7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICAgIGQ9Im0gMjU2LDYwNC4zNjIxOCAtNiwwIGMgLTQyLDk2IC0zOC44NTU5LDEzOC42NjIzNyAtNTgsMjA4IGwgLTExMiw5NiAtMTYsODAgNywwIDI1LC00OCAxMjAsLTQ4IGMgOCw2NCA0MCw2NCA0MCw5NiIKICAgICAgICAgICBpZD0idXNlMzEzNiIKICAgICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgogICAgICA8L2c+CiAgICAgIDxnCiAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMTYpIgogICAgICAgICBpZD0iY29ja3BpdCI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50MzgzMCk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICAgIGQ9Im0gMjU2LDI1NiBjIDE3LC0xIDI3LDE3IDMyLDMyIDIsMyA3LjQ1NzQzLDMyIC0xNiwzMiAtMy4wODA1OCwtNi44MzUxNyAtNi45OTM1NCwtMTMuMTE1NDIgLTE2LC0xNiIKICAgICAgICAgICBpZD0icGF0aDM5MTAiCiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDU0MC4zNjIxOCkiCiAgICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjIiAvPgogICAgICAgIDx1c2UKICAgICAgICAgICB4PSIwIgogICAgICAgICAgIHk9IjAiCiAgICAgICAgICAgeGxpbms6aHJlZj0iI3BhdGgzOTEwIgogICAgICAgICAgIGlkPSJ1c2UzOTEyIgogICAgICAgICAgIHdpZHRoPSI1MTIiCiAgICAgICAgICAgaGVpZ2h0PSI1MTIiCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLTEsMCwwLDEsNTEyLDApIiAvPgogICAgICA8L2c+CiAgICAgIDxnCiAgICAgICAgIGlkPSJ0b3JwZWRvX2xhdW5jaGVycyI+CiAgICAgICAgPHBhdGgKICAgICAgICAgICBzdHlsZT0ib3BhY2l0eTowLjU7ZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50OTQzNSk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiCiAgICAgICAgICAgZD0ibSAyNjQsNjg0LjM2MjE4IGMgMi4wMDg4LDExLjU5NTQxIC0xLjU2MjY0LDMxLjA2ODgyIDgsMzIgOS4zNjkzOSwtMC44MTc3NyA1Ljg3MzQ3LC0yMC41Mzk2NyA4LC0zMiIKICAgICAgICAgICBpZD0icGF0aDQyNjciCiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjYyIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgeD0iMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoNDI2NyIKICAgICAgICAgICBpZD0idXNlNDI2OSIKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMSwwLDAsMSw1MTIsMCkiCiAgICAgICAgICAgd2lkdGg9IjUxMiIKICAgICAgICAgICBoZWlnaHQ9IjUxMiIgLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPHBhdGgKICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgIHN0eWxlPSJmaWxsOnVybCgjcmFkaWFsR3JhZGllbnQzODM5KTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbjtmaWx0ZXI6dXJsKCNmaWx0ZXIzODU3KSIKICAgICAgIGlkPSJleHBsb3Npb24iCiAgICAgICBzb2RpcG9kaTpjeD0iMjU2IgogICAgICAgc29kaXBvZGk6Y3k9IjI1NiIKICAgICAgIHNvZGlwb2RpOnJ4PSIxNjAiCiAgICAgICBzb2RpcG9kaTpyeT0iMTYwIgogICAgICAgZD0ibSA0MTYsMjU2IGEgMTYwLDE2MCAwIDEgMSAtMzIwLDAgMTYwLDE2MCAwIDEgMSAzMjAsMCB6IgogICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMS41Nzg2MjYxLC0wLjAwODIwNTE0LDAuMDA4MDk1NTIsMS42LC0xNTEuNDk2MDMsMzg4Ljg2MjY5KSIgLz4KICA8L2c+Cjwvc3ZnPgo=`),
  loadImage(`PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iMjU2IgogICBoZWlnaHQ9IjI1NiIKICAgaWQ9InN2ZzIiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuNDguMCByOTY1NCIKICAgc29kaXBvZGk6ZG9jbmFtZT0icHJvamVjdGlsZTEuc3ZnIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgb2JqZWN0dG9sZXJhbmNlPSIxMCIKICAgICBncmlkdG9sZXJhbmNlPSIxMCIKICAgICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE0NDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODIzIgogICAgIGlkPSJuYW1lZHZpZXc0NjY5IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOnpvb209IjEuNDE5NzM3OCIKICAgICBpbmtzY2FwZTpjeD0iNTEuNDQ5ODAyIgogICAgIGlua3NjYXBlOmN5PSIxMTIuODgyNDUiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI0IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMiIKICAgICBzaG93Z3VpZGVzPSJ0cnVlIgogICAgIGlua3NjYXBlOmd1aWRlLWJib3g9InRydWUiPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iMCwxIgogICAgICAgcG9zaXRpb249IjEyOCwxMjgiCiAgICAgICBpZD0iZ3VpZGU0MDc1IiAvPgogICAgPHNvZGlwb2RpOmd1aWRlCiAgICAgICBvcmllbnRhdGlvbj0iMSwwIgogICAgICAgcG9zaXRpb249IjEyOCwxMjgiCiAgICAgICBpZD0iZ3VpZGU0MDc3IiAvPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIHR5cGU9Inh5Z3JpZCIKICAgICAgIGlkPSJncmlkNDA5NCIKICAgICAgIGVtcHNwYWNpbmc9IjQiCiAgICAgICB2aXNpYmxlPSJ0cnVlIgogICAgICAgZW5hYmxlZD0idHJ1ZSIKICAgICAgIHNuYXB2aXNpYmxlZ3JpZGxpbmVzb25seT0idHJ1ZSIgLz4KICA8L3NvZGlwb2RpOm5hbWVkdmlldz4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDM4NDMiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDM4NDUiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjEiCiAgICAgICAgIG9mZnNldD0iMCIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AzODQ3IgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmY2NDAwO3N0b3Atb3BhY2l0eToxIgogICAgICAgICBvZmZzZXQ9IjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGZpbHRlcgogICAgICAgeD0iLTAuMTUwMDAwMDEiCiAgICAgICB5PSItMC4xNTAwMDAwMSIKICAgICAgIHdpZHRoPSIxLjMiCiAgICAgICBoZWlnaHQ9IjEuMyIKICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgIGlkPSJmaWx0ZXIzNzk1Ij4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICByZXN1bHQ9InJlc3VsdDkxIgogICAgICAgICB0eXBlPSJmcmFjdGFsTm9pc2UiCiAgICAgICAgIG51bU9jdGF2ZXM9IjUiCiAgICAgICAgIGJhc2VGcmVxdWVuY3k9IjAuMDUiCiAgICAgICAgIGlkPSJmZVR1cmJ1bGVuY2UzNzk3IiAvPgogICAgICA8ZmVEaXNwbGFjZW1lbnRNYXAKICAgICAgICAgaW4yPSJyZXN1bHQ5MSIKICAgICAgICAgc2NhbGU9IjI1IgogICAgICAgICB4Q2hhbm5lbFNlbGVjdG9yPSJSIgogICAgICAgICB5Q2hhbm5lbFNlbGVjdG9yPSJBIgogICAgICAgICBpbj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ1IgogICAgICAgICBpZD0iZmVEaXNwbGFjZW1lbnRNYXAzNzk5IiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaW4yPSJyZXN1bHQ1IgogICAgICAgICBvcGVyYXRvcj0iYXRvcCIKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUzODAxIiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICBpZD0iZmVDb2xvck1hdHJpeDM4MDMiCiAgICAgICAgIHZhbHVlcz0iMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIC0xIDAgMCAwIDAgMSAwIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpY0FscGhhIiAvPgogICAgICA8ZmVUdXJidWxlbmNlCiAgICAgICAgIHJlc3VsdD0icmVzdWx0MSIKICAgICAgICAgbnVtT2N0YXZlcz0iNSIKICAgICAgICAgc2VlZD0iMCIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjQiCiAgICAgICAgIGlkPSJmZVR1cmJ1bGVuY2UzODA1IiAvPgogICAgICA8ZmVPZmZzZXQKICAgICAgICAgcmVzdWx0PSJyZXN1bHQyIgogICAgICAgICBkeT0iLTUiCiAgICAgICAgIGR4PSItNSIKICAgICAgICAgaWQ9ImZlT2Zmc2V0MzgwNyIgLz4KICAgICAgPGZlRGlzcGxhY2VtZW50TWFwCiAgICAgICAgIGluMj0icmVzdWx0MSIKICAgICAgICAgc2NhbGU9IjMwIgogICAgICAgICB4Q2hhbm5lbFNlbGVjdG9yPSJSIgogICAgICAgICB5Q2hhbm5lbFNlbGVjdG9yPSJHIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgaWQ9ImZlRGlzcGxhY2VtZW50TWFwMzgwOSIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODExIgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICBzZWVkPSI1IgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjI1IDAuNCIKICAgICAgICAgbnVtT2N0YXZlcz0iMyIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICBpZD0iZmVUdXJidWxlbmNlMzgxMyIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgdmFsdWVzPSIxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAxIDAgIgogICAgICAgICByZXN1bHQ9InJlc3VsdDUiCiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4MzgxNSIgLz4KICAgICAgPGZlQ29tcG9zaXRlCiAgICAgICAgIGluMj0icmVzdWx0NSIKICAgICAgICAgb3BlcmF0b3I9ImluIgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUzODE3IiAvPgogICAgICA8ZmVNb3JwaG9sb2d5CiAgICAgICAgIHJlc3VsdD0icmVzdWx0MyIKICAgICAgICAgcmFkaXVzPSIxIgogICAgICAgICBvcGVyYXRvcj0iZGlsYXRlIgogICAgICAgICBpZD0iZmVNb3JwaG9sb2d5MzgxOSIgLz4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICBzZWVkPSI3IgogICAgICAgICB0eXBlPSJmcmFjdGFsTm9pc2UiCiAgICAgICAgIGJhc2VGcmVxdWVuY3k9IjAuMDMiCiAgICAgICAgIG51bU9jdGF2ZXM9IjUiCiAgICAgICAgIGlkPSJmZVR1cmJ1bGVuY2UzODIxIiAvPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ5MSIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjUiCiAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjM4MjMiIC8+CiAgICAgIDxmZURpc3BsYWNlbWVudE1hcAogICAgICAgICBpbjI9InJlc3VsdDkxIgogICAgICAgICBzY2FsZT0iMjciCiAgICAgICAgIHhDaGFubmVsU2VsZWN0b3I9IlIiCiAgICAgICAgIHlDaGFubmVsU2VsZWN0b3I9IkciCiAgICAgICAgIGluPSJyZXN1bHQzIgogICAgICAgICByZXN1bHQ9InJlc3VsdDQiCiAgICAgICAgIGlkPSJmZURpc3BsYWNlbWVudE1hcDM4MjUiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZQogICAgICAgICBpbjI9InJlc3VsdDQiCiAgICAgICAgIG9wZXJhdG9yPSJhcml0aG1ldGljIgogICAgICAgICBrMT0iMS4zIgogICAgICAgICBrMj0iMCIKICAgICAgICAgazM9IjAuOCIKICAgICAgICAgazQ9IjAiCiAgICAgICAgIGluPSJyZXN1bHQ0IgogICAgICAgICByZXN1bHQ9InJlc3VsdDIiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTM4MjciIC8+CiAgICAgIDxmZUJsZW5kCiAgICAgICAgIGluMj0icmVzdWx0MiIKICAgICAgICAgbW9kZT0ic2NyZWVuIgogICAgICAgICBpbj0icmVzdWx0MiIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGlkPSJmZUJsZW5kMzgyOSIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODMxIgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICByZXN1bHQ9InJlc3VsdDEiCiAgICAgICAgIGJhc2VGcmVxdWVuY3k9IjAuMDEiCiAgICAgICAgIG51bU9jdGF2ZXM9IjUiCiAgICAgICAgIHR5cGU9ImZyYWN0YWxOb2lzZSIKICAgICAgICAgaWQ9ImZlVHVyYnVsZW5jZTM4MzMiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZQogICAgICAgICBpbjI9InJlc3VsdDEiCiAgICAgICAgIG9wZXJhdG9yPSJpbiIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQyIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUzODM1IiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICBpbj0icmVzdWx0MiIKICAgICAgICAgdmFsdWVzPSIxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAzIC0xICIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4MzgzNyIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODM5IgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMyIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyMzg0MSIgLz4KICAgIDwvZmlsdGVyPgogICAgPHJhZGlhbEdyYWRpZW50CiAgICAgICBjeD0iMTI4IgogICAgICAgY3k9IjEyOCIKICAgICAgIHI9Ijc2IgogICAgICAgZng9IjEyOCIKICAgICAgIGZ5PSIxMjgiCiAgICAgICBpZD0icmFkaWFsR3JhZGllbnQzODQ5IgogICAgICAgeGxpbms6aHJlZj0iI2xpbmVhckdyYWRpZW50Mzg0MyIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwwLjk2ODQyMTA2LDAsNC4wNDIxMDQ3KSIgLz4KICAgIDxmaWx0ZXIKICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIGlkPSJmaWx0ZXIzOTM5IgogICAgICAgeD0iLTAuMzM2IgogICAgICAgd2lkdGg9IjEuNjcyMDAwMSIKICAgICAgIHk9Ii0wLjA1NjAwMDAwMiIKICAgICAgIGhlaWdodD0iMS4xMTIiPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICAgICBzdGREZXZpYXRpb249IjMuMzYiCiAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjM5NDEiIC8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPHBhdGgKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgIHN0eWxlPSJmaWxsOnVybCgjcmFkaWFsR3JhZGllbnQzODQ5KTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbjtmaWx0ZXI6dXJsKCNmaWx0ZXIzNzk1KSIKICAgICBpZD0iZXhwbG9zaW9uIgogICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNjI1LDAsMCwwLjUsNDgsNjQpIgogICAgIGQ9Im0gMTkyLDEyOCBhIDY0LDY0IDAgMSAxIC0xMjgsMCA2NCw2NCAwIDEgMSAxMjgsMCB6IiAvPgogIDxnCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNzk2LjM2MjE4KSIKICAgICBpZD0iYmVhbSIKICAgICBzdHlsZT0idmlzaWJpbGl0eTp2aXNpYmxlO2ZpbHRlcjp1cmwoI2ZpbHRlcjM5MzkpIj4KICAgIDxyZWN0CiAgICAgICB5PSI4NTIuMzYyMTgiCiAgICAgICB4PSIxMTYiCiAgICAgICBoZWlnaHQ9IjE0NCIKICAgICAgIHdpZHRoPSIyNCIKICAgICAgIGlkPSJyZWN0Mjk5MSIKICAgICAgIHN0eWxlPSJmaWxsOiNjODRiMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIC8+CiAgICA8cmVjdAogICAgICAgeT0iODYwLjM2MjE4IgogICAgICAgeD0iMTI0IgogICAgICAgaGVpZ2h0PSIxMjgiCiAgICAgICB3aWR0aD0iOCIKICAgICAgIGlkPSJyZWN0Mzc2MSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIC8+CiAgPC9nPgo8L3N2Zz4K`),
  loadImage(`PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iMjU2IgogICBoZWlnaHQ9IjI1NiIKICAgaWQ9InN2ZzIiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuNDguMCByOTY1NCIKICAgc29kaXBvZGk6ZG9jbmFtZT0icHJvamVjdGlsZTIuc3ZnIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgb2JqZWN0dG9sZXJhbmNlPSIxMCIKICAgICBncmlkdG9sZXJhbmNlPSIxMCIKICAgICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE0NDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODIzIgogICAgIGlkPSJuYW1lZHZpZXc0ODM5IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOnpvb209IjEuNDE5NzM3OCIKICAgICBpbmtzY2FwZTpjeD0iOTguNTk1OCIKICAgICBpbmtzY2FwZTpjeT0iMTM4LjM0MjMxIgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIyNCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzIiCiAgICAgc2hvd2d1aWRlcz0idHJ1ZSIKICAgICBpbmtzY2FwZTpndWlkZS1iYm94PSJ0cnVlIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBpZD0iZ3JpZDUwOTQiCiAgICAgICBlbXBzcGFjaW5nPSI0IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiCiAgICAgICBzbmFwdmlzaWJsZWdyaWRsaW5lc29ubHk9InRydWUiIC8+CiAgICA8c29kaXBvZGk6Z3VpZGUKICAgICAgIG9yaWVudGF0aW9uPSIwLDEiCiAgICAgICBwb3NpdGlvbj0iMTI4LDEyOCIKICAgICAgIGlkPSJndWlkZTUwOTYiIC8+CiAgICA8c29kaXBvZGk6Z3VpZGUKICAgICAgIG9yaWVudGF0aW9uPSIxLDAiCiAgICAgICBwb3NpdGlvbj0iMTI4LDEyOCIKICAgICAgIGlkPSJndWlkZTUwOTgiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQzODQzIj4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AzODQ1IgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eToxIgogICAgICAgICBvZmZzZXQ9IjAiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMzg0NyIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzAwMzJmZjtzdG9wLW9wYWNpdHk6MSIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIKICAgICAgIHg9Ii0wLjE1MDAwMDAxIgogICAgICAgeT0iLTAuMTUwMDAwMDEiCiAgICAgICB3aWR0aD0iMS4zIgogICAgICAgaGVpZ2h0PSIxLjMiCiAgICAgICBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiCiAgICAgICBpZD0iZmlsdGVyMzc5NSI+CiAgICAgIDxmZVR1cmJ1bGVuY2UKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ5MSIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICBudW1PY3RhdmVzPSI1IgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjA1IgogICAgICAgICBpZD0iZmVUdXJidWxlbmNlMzc5NyIgLz4KICAgICAgPGZlRGlzcGxhY2VtZW50TWFwCiAgICAgICAgIGluMj0icmVzdWx0OTEiCiAgICAgICAgIHNjYWxlPSIyNSIKICAgICAgICAgeENoYW5uZWxTZWxlY3Rvcj0iUiIKICAgICAgICAgeUNoYW5uZWxTZWxlY3Rvcj0iQSIKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0icmVzdWx0NSIKICAgICAgICAgaWQ9ImZlRGlzcGxhY2VtZW50TWFwMzc5OSIgLz4KICAgICAgPGZlQ29tcG9zaXRlCiAgICAgICAgIGluMj0icmVzdWx0NSIKICAgICAgICAgb3BlcmF0b3I9ImF0b3AiCiAgICAgICAgIGluPSJTb3VyY2VHcmFwaGljIgogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlMzgwMSIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXgzODAzIgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICByZXN1bHQ9InJlc3VsdDEiCiAgICAgICAgIG51bU9jdGF2ZXM9IjUiCiAgICAgICAgIHNlZWQ9IjAiCiAgICAgICAgIHR5cGU9ImZyYWN0YWxOb2lzZSIKICAgICAgICAgYmFzZUZyZXF1ZW5jeT0iMC40IgogICAgICAgICBpZD0iZmVUdXJidWxlbmNlMzgwNSIgLz4KICAgICAgPGZlT2Zmc2V0CiAgICAgICAgIHJlc3VsdD0icmVzdWx0MiIKICAgICAgICAgZHk9Ii01IgogICAgICAgICBkeD0iLTUiCiAgICAgICAgIGlkPSJmZU9mZnNldDM4MDciIC8+CiAgICAgIDxmZURpc3BsYWNlbWVudE1hcAogICAgICAgICBpbjI9InJlc3VsdDEiCiAgICAgICAgIHNjYWxlPSIzMCIKICAgICAgICAgeENoYW5uZWxTZWxlY3Rvcj0iUiIKICAgICAgICAgeUNoYW5uZWxTZWxlY3Rvcj0iRyIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGlkPSJmZURpc3BsYWNlbWVudE1hcDM4MDkiIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4CiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4MzgxMSIKICAgICAgICAgdmFsdWVzPSIwIDAgMCAtMSAwIDAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAxIDAiCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljQWxwaGEiIC8+CiAgICAgIDxmZVR1cmJ1bGVuY2UKICAgICAgICAgc2VlZD0iNSIKICAgICAgICAgYmFzZUZyZXF1ZW5jeT0iMC4yNSAwLjQiCiAgICAgICAgIG51bU9jdGF2ZXM9IjMiCiAgICAgICAgIHR5cGU9ImZyYWN0YWxOb2lzZSIKICAgICAgICAgaWQ9ImZlVHVyYnVsZW5jZTM4MTMiIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4CiAgICAgICAgIHZhbHVlcz0iMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMSAwICIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ1IgogICAgICAgICBpZD0iZmVDb2xvck1hdHJpeDM4MTUiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZQogICAgICAgICBpbjI9InJlc3VsdDUiCiAgICAgICAgIG9wZXJhdG9yPSJpbiIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlMzgxNyIgLz4KICAgICAgPGZlTW9ycGhvbG9neQogICAgICAgICByZXN1bHQ9InJlc3VsdDMiCiAgICAgICAgIHJhZGl1cz0iMSIKICAgICAgICAgb3BlcmF0b3I9ImRpbGF0ZSIKICAgICAgICAgaWQ9ImZlTW9ycGhvbG9neTM4MTkiIC8+CiAgICAgIDxmZVR1cmJ1bGVuY2UKICAgICAgICAgc2VlZD0iNyIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjAzIgogICAgICAgICBudW1PY3RhdmVzPSI1IgogICAgICAgICBpZD0iZmVUdXJidWxlbmNlMzgyMSIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIHJlc3VsdD0icmVzdWx0OTEiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMC41IgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXIzODIzIiAvPgogICAgICA8ZmVEaXNwbGFjZW1lbnRNYXAKICAgICAgICAgaW4yPSJyZXN1bHQ5MSIKICAgICAgICAgc2NhbGU9IjI3IgogICAgICAgICB4Q2hhbm5lbFNlbGVjdG9yPSJSIgogICAgICAgICB5Q2hhbm5lbFNlbGVjdG9yPSJHIgogICAgICAgICBpbj0icmVzdWx0MyIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ0IgogICAgICAgICBpZD0iZmVEaXNwbGFjZW1lbnRNYXAzODI1IiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaW4yPSJyZXN1bHQ0IgogICAgICAgICBvcGVyYXRvcj0iYXJpdGhtZXRpYyIKICAgICAgICAgazE9IjEuMyIKICAgICAgICAgazI9IjAiCiAgICAgICAgIGszPSIwLjgiCiAgICAgICAgIGs0PSIwIgogICAgICAgICBpbj0icmVzdWx0NCIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQyIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUzODI3IiAvPgogICAgICA8ZmVCbGVuZAogICAgICAgICBpbjI9InJlc3VsdDIiCiAgICAgICAgIG1vZGU9InNjcmVlbiIKICAgICAgICAgaW49InJlc3VsdDIiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICBpZD0iZmVCbGVuZDM4MjkiIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4CiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4MzgzMSIKICAgICAgICAgdmFsdWVzPSIwIDAgMCAtMSAwIDAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAxIDAiCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljQWxwaGEiIC8+CiAgICAgIDxmZVR1cmJ1bGVuY2UKICAgICAgICAgcmVzdWx0PSJyZXN1bHQxIgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjAxIgogICAgICAgICBudW1PY3RhdmVzPSI1IgogICAgICAgICB0eXBlPSJmcmFjdGFsTm9pc2UiCiAgICAgICAgIGlkPSJmZVR1cmJ1bGVuY2UzODMzIiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaW4yPSJyZXN1bHQxIgogICAgICAgICBvcGVyYXRvcj0iaW4iCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0icmVzdWx0MiIKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlMzgzNSIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaW49InJlc3VsdDIiCiAgICAgICAgIHZhbHVlcz0iMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMyAtMSAiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICBpZD0iZmVDb2xvck1hdHJpeDM4MzciIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4CiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4MzgzOSIKICAgICAgICAgdmFsdWVzPSIwIDAgMCAtMSAwIDAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAxIDAiCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0iZmJTb3VyY2VHcmFwaGljQWxwaGEiIC8+CiAgICAgIDxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpbj0iZmJTb3VyY2VHcmFwaGljIgogICAgICAgICBzdGREZXZpYXRpb249IjMiCiAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjM4NDEiIC8+CiAgICA8L2ZpbHRlcj4KICAgIDxyYWRpYWxHcmFkaWVudAogICAgICAgY3g9IjEyOCIKICAgICAgIGN5PSIxMjgiCiAgICAgICByPSI3NiIKICAgICAgIGZ4PSIxMjgiCiAgICAgICBmeT0iMTI4IgogICAgICAgaWQ9InJhZGlhbEdyYWRpZW50Mzg0OSIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDM4NDMiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMC45Njg0MjEwNiwwLDQuMDQyMTA0NykiIC8+CiAgICA8ZmlsdGVyCiAgICAgICBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiCiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICBpZD0iZmlsdGVyMzkzOSIKICAgICAgIHg9Ii0wLjMzNiIKICAgICAgIHdpZHRoPSIxLjY3MjAwMDEiCiAgICAgICB5PSItMC4wNTYwMDAwMDIiCiAgICAgICBoZWlnaHQ9IjEuMTEyIj4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIzLjM2IgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXIzOTQxIiAvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxwYXRoCiAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICBzdHlsZT0iZmlsbDp1cmwoI3JhZGlhbEdyYWRpZW50Mzg0OSk7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmU7dmlzaWJpbGl0eTpoaWRkZW47ZmlsdGVyOnVybCgjZmlsdGVyMzc5NSkiCiAgICAgaWQ9ImV4cGxvc2lvbiIKICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjYyNSwwLDAsMC41LDQ4LDY0KSIKICAgICBkPSJtIDE5MiwxMjggYSA2NCw2NCAwIDEgMSAtMTI4LDAgNjQsNjQgMCAxIDEgMTI4LDAgeiIgLz4KICA8ZwogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTc5Ni4zNjIxOCkiCiAgICAgaWQ9ImJlYW0iCiAgICAgc3R5bGU9InZpc2liaWxpdHk6dmlzaWJsZTtmaWx0ZXI6dXJsKCNmaWx0ZXIzOTM5KSI+CiAgICA8cmVjdAogICAgICAgeT0iODUyLjM2MjE4IgogICAgICAgeD0iMTE2IgogICAgICAgaGVpZ2h0PSIxNDQiCiAgICAgICB3aWR0aD0iMjQiCiAgICAgICBpZD0icmVjdDI5OTEiCiAgICAgICBzdHlsZT0iZmlsbDojMDA0YmM4O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIiAvPgogICAgPHJlY3QKICAgICAgIHk9Ijg2MC4zNjIxOCIKICAgICAgIHg9IjEyNCIKICAgICAgIGhlaWdodD0iMTI4IgogICAgICAgd2lkdGg9IjgiCiAgICAgICBpZD0icmVjdDM3NjEiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIiAvPgogIDwvZz4KPC9zdmc+Cg==`),
  loadImage(`PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iNTEyIgogICBoZWlnaHQ9IjUxMiIKICAgaWQ9InN2ZzIiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50NTYwNCI+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wNTYwNiIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6IzAwMDBmZjtzdG9wLW9wYWNpdHk6MSIKICAgICAgICAgb2Zmc2V0PSIwIiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDU2MTAiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiMwMGM4ZmY7c3RvcC1vcGFjaXR5OjEiCiAgICAgICAgIG9mZnNldD0iMSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDQ5NTAiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDQ5NTQiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiMwMDAwMDA7c3RvcC1vcGFjaXR5OjEiCiAgICAgICAgIG9mZnNldD0iMCIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3A0OTU2IgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMDAwMDAwO3N0b3Atb3BhY2l0eTowIgogICAgICAgICBvZmZzZXQ9IjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ0Mzc4Ij4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3A0MzgwIgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojOTY5Njk2O3N0b3Atb3BhY2l0eToxIgogICAgICAgICBvZmZzZXQ9IjAiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wNDM4OCIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2M4YzljODtzdG9wLW9wYWNpdHk6MSIKICAgICAgICAgb2Zmc2V0PSIwLjgwMDAwMDAxIiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDQzODIiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjEiCiAgICAgICAgIG9mZnNldD0iMSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8cmFkaWFsR3JhZGllbnQKICAgICAgIGN4PSIyNTYiCiAgICAgICBjeT0iMjU2IgogICAgICAgcj0iMjI0LjUiCiAgICAgICBmeD0iMjU2IgogICAgICAgZnk9IjI1NiIKICAgICAgIGlkPSJyYWRpYWxHcmFkaWVudDQzOTYiCiAgICAgICB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQ0Mzc4IgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIC8+CiAgICA8cmFkaWFsR3JhZGllbnQKICAgICAgIGN4PSIyNTYiCiAgICAgICBjeT0iMjU0IgogICAgICAgcj0iODguNSIKICAgICAgIGZ4PSIyNTYiCiAgICAgICBmeT0iMjU0IgogICAgICAgaWQ9InJhZGlhbEdyYWRpZW50NDc1NiIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDU2MDQiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMC45Nzc0MDExMywwLDUuNzQwMTEzKSIgLz4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50OTA4MyI+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wOTA4NSIKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmZmZmZjtzdG9wLW9wYWNpdHk6MSIKICAgICAgICAgb2Zmc2V0PSIwIiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDQ4NzgiCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmIxN2Y7c3RvcC1vcGFjaXR5OjEiCiAgICAgICAgIG9mZnNldD0iMC43NSIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3A5MDg3IgogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmY2NDAwO3N0b3Atb3BhY2l0eToxIgogICAgICAgICBvZmZzZXQ9IjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPHJhZGlhbEdyYWRpZW50CiAgICAgICBjeD0iMjU2IgogICAgICAgY3k9IjI1NiIKICAgICAgIHI9IjI1Ni41IgogICAgICAgZng9IjI1NiIKICAgICAgIGZ5PSIyNTYiCiAgICAgICBpZD0icmFkaWFsR3JhZGllbnQ0ODc2IgogICAgICAgeGxpbms6aHJlZj0iI2xpbmVhckdyYWRpZW50OTA4MyIKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLjkzNzUsMCwwLDAuOTM3NSwxNiw1NTYuMzYyMTgpIiAvPgogICAgPGZpbHRlcgogICAgICAgeD0iLTAuMiIKICAgICAgIHk9Ii0wLjIiCiAgICAgICB3aWR0aD0iMS40IgogICAgICAgaGVpZ2h0PSIxLjQiCiAgICAgICBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiCiAgICAgICBpZD0iZmlsdGVyNDkzMCI+CiAgICAgIDxmZVR1cmJ1bGVuY2UKICAgICAgICAgcmVzdWx0PSJyZXN1bHQ5MSIKICAgICAgICAgdHlwZT0iZnJhY3RhbE5vaXNlIgogICAgICAgICBudW1PY3RhdmVzPSI1IgogICAgICAgICBiYXNlRnJlcXVlbmN5PSIwLjA1IgogICAgICAgICBpZD0iZmVUdXJidWxlbmNlNDkzMiIgLz4KICAgICAgPGZlRGlzcGxhY2VtZW50TWFwCiAgICAgICAgIGluMj0icmVzdWx0OTEiCiAgICAgICAgIHNjYWxlPSIyNSIKICAgICAgICAgeENoYW5uZWxTZWxlY3Rvcj0iUiIKICAgICAgICAgeUNoYW5uZWxTZWxlY3Rvcj0iQSIKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHJlc3VsdD0icmVzdWx0NSIKICAgICAgICAgaWQ9ImZlRGlzcGxhY2VtZW50TWFwNDkzNCIgLz4KICAgICAgPGZlQ29tcG9zaXRlCiAgICAgICAgIGluMj0icmVzdWx0NSIKICAgICAgICAgb3BlcmF0b3I9ImF0b3AiCiAgICAgICAgIGluPSJTb3VyY2VHcmFwaGljIgogICAgICAgICByZXN1bHQ9ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlNDkzNiIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXg0OTM4IgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlVHVyYnVsZW5jZQogICAgICAgICByZXN1bHQ9InJlc3VsdDEiCiAgICAgICAgIGJhc2VGcmVxdWVuY3k9IjAuMDIiCiAgICAgICAgIG51bU9jdGF2ZXM9IjUiCiAgICAgICAgIHR5cGU9ImZyYWN0YWxOb2lzZSIKICAgICAgICAgaWQ9ImZlVHVyYnVsZW5jZTQ5NDAiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZQogICAgICAgICBpbjI9InJlc3VsdDEiCiAgICAgICAgIG9wZXJhdG9yPSJpbiIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJyZXN1bHQyIgogICAgICAgICBpZD0iZmVDb21wb3NpdGU0OTQyIiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICBpbj0icmVzdWx0MiIKICAgICAgICAgdmFsdWVzPSIxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAzIC0xICIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4NDk0NCIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXg0OTQ2IgogICAgICAgICB2YWx1ZXM9IjAgMCAwIC0xIDAgMCAwIDAgLTEgMCAwIDAgMCAtMSAwIDAgMCAwIDEgMCIKICAgICAgICAgaW49ImZiU291cmNlR3JhcGhpYyIKICAgICAgICAgcmVzdWx0PSJmYlNvdXJjZUdyYXBoaWNBbHBoYSIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGluPSJmYlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMyIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyNDk0OCIgLz4KICAgIDwvZmlsdGVyPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICB4MT0iMjcyIgogICAgICAgeTE9IjczMi4zNjIxOCIKICAgICAgIHgyPSIyNzIiCiAgICAgICB5Mj0iNzE2LjM2MjE4IgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50NDk2MCIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDQ5NTAiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM2LC03NikiIC8+CiAgPC9kZWZzPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwtNTQwLjM2MjE4KSIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxnCiAgICAgICBpZD0idWZvIgogICAgICAgc3R5bGU9InZpc2liaWxpdHk6dmlzaWJsZSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Im0gNDgwLDI1NiBhIDIyNCwyMjQgMCAxIDEgLTQ0OCwwIDIyNCwyMjQgMCAxIDEgNDQ4LDAgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw1NDAuMzYyMTgpIgogICAgICAgICBpZD0iaHVsbCIKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNyYWRpYWxHcmFkaWVudDQzOTYpO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojMDAwMDAwO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICAgIDxnCiAgICAgICAgIGlkPSJjb2NrcGl0Ij4KICAgICAgICA8cGF0aAogICAgICAgICAgIGQ9Im0gMzQ0LDI1NCBhIDg4LDg2IDAgMSAxIC0xNzYsMCA4OCw4NiAwIDEgMSAxNzYsMCB6IgogICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEuMDIzMjU1OCwwLDUzNi40NTUyKSIKICAgICAgICAgICBpZD0icGF0aDQ3NDgiCiAgICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNyYWRpYWxHcmFkaWVudDQ3NTYpO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtZGFzaGFycmF5Om5vbmUiIC8+CiAgICAgICAgPGcKICAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjcwNzEwNjc4LDAuNzA3MTA2NzgsLTAuNzA3MTA2NzgsMC43MDcxMDY3OCw2MzguMDkzNzYsNTIuMjI5NzQ2KSIKICAgICAgICAgICBpZD0iZzQ3MzIiCiAgICAgICAgICAgc3R5bGU9ImZpbGw6I2FmYWZhZjtmaWxsLW9wYWNpdHk6MSI+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgZD0ibSAyNDMsMTY4IDMuOTM3NSw1My4xNTYyNSBjIC0xMi41OTkzNywzLjI2NzQgLTIyLjUxMzg1LDEzLjE4MTg4IC0yNS43ODEyNSwyNS43ODEyNSBMIDE2OCwyNDMgbCAwLDI4IDUzLjcxODc1LC0zLjk2ODc1IGMgMy42NDQ1NiwxMS4zNDY5NSAxMi43NjM3LDIwLjIwNjA2IDI0LjI1LDIzLjUzMTI1IEwgMjQyLDM0NCBsIDI4LDAgLTMuOTY4NzUsLTUzLjQzNzUgYyAxMS44MTMwNywtMy40MTk3OSAyMS4xMDY1OCwtMTIuNzI2MjQgMjQuNTMxMjUsLTI0LjUzMTI1IEwgMzQ0LDI3MCBsIDAsLTI4IC01My40Mzc1LDMuOTY4NzUgYyAtMy4zMjYyNywtMTEuNDc3NTQgLTEyLjE5MDI4LC0yMC42MDczNiAtMjMuNTMxMjUsLTI0LjI1IEwgMjcxLDE2OCBsIC0yOCwwIHoiCiAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDU0MC4zNjIxOCkiCiAgICAgICAgICAgICBpZD0icmVjdDQ0MDIiCiAgICAgICAgICAgICBzdHlsZT0iZmlsbDojYWZhZmFmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgICAgPGcKICAgICAgICAgaWQ9InRvcnBlZG9fbGF1bmNoZXJzIj4KICAgICAgICA8cGF0aAogICAgICAgICAgIGQ9Im0gMjM2LDY0MC4zNjIxOCBjIDIuMDA4OCwxMS41OTU0MSAtMS41NjI2NCwzMS4wNjg4MiA4LDMyIDkuMzY5MzksLTAuODE3NzcgNS44NzM0NywtMjAuNTM5NjcgOCwtMzIiCiAgICAgICAgICAgaWQ9InBhdGg0MjY3IgogICAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjAuNTtmaWxsOnVybCgjbGluZWFyR3JhZGllbnQ0OTYwKTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTt2aXNpYmlsaXR5OnZpc2libGUiIC8+CiAgICAgICAgPHVzZQogICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAsMSwtMSwwLDEwNTIuMzYyMiw1NDAuMzYyMTgpIgogICAgICAgICAgIGlkPSJ1c2U0NzkyIgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB3aWR0aD0iNTEyIgogICAgICAgICAgIGhlaWdodD0iNTEyIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoNDI2NyIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMCwtMSwxLDAsLTU0MC4zNjIxOCwxMDI4LjM2MjIpIgogICAgICAgICAgIGlkPSJ1c2U0Nzk4IgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB3aWR0aD0iNTEyIgogICAgICAgICAgIGhlaWdodD0iNTEyIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoNDI2NyIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLTEsMCwwLC0xLDUxMiwxNTkyLjcyNDQpIgogICAgICAgICAgIGlkPSJ1c2U0ODAwIgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB3aWR0aD0iNTEyIgogICAgICAgICAgIGhlaWdodD0iNTEyIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiNwYXRoNDI2NyIgLz4KICAgICAgICA8dXNlCiAgICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQsMCkiCiAgICAgICAgICAgaWQ9InVzZTQ4MDYiCiAgICAgICAgICAgeD0iMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHdpZHRoPSI1MTIiCiAgICAgICAgICAgaGVpZ2h0PSI1MTIiCiAgICAgICAgICAgeGxpbms6aHJlZj0iI3BhdGg0MjY3IiAvPgogICAgICAgIDx1c2UKICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMmUtNSwyNCkiCiAgICAgICAgICAgaWQ9InVzZTQ4MDgiCiAgICAgICAgICAgeD0iMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHdpZHRoPSI1MTIiCiAgICAgICAgICAgaGVpZ2h0PSI1MTIiCiAgICAgICAgICAgeGxpbms6aHJlZj0iI3VzZTQ3OTIiIC8+CiAgICAgICAgPHVzZQogICAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMjMuOTk5OTgpIgogICAgICAgICAgIGlkPSJ1c2U0ODEwIgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB3aWR0aD0iNTEyIgogICAgICAgICAgIGhlaWdodD0iNTEyIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiN1c2U0Nzk4IiAvPgogICAgICAgIDx1c2UKICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQsLTRlLTUpIgogICAgICAgICAgIGlkPSJ1c2U0ODEyIgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB3aWR0aD0iNTEyIgogICAgICAgICAgIGhlaWdodD0iNTEyIgogICAgICAgICAgIHhsaW5rOmhyZWY9IiN1c2U0ODAwIiAvPgogICAgICA8L2c+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik0gMTkyLDc5LjE4NzUgQyAxMzkuNjUxMzcsOTguMTM1NDAzIDk4LjEwNDQ0NCwxMzkuNjU3MzMgNzkuMTU2MjUsMTkyIEwgMTY5LDE5MiBjIDYuNDY2OTcsLTguNzc3MDggMTQuMjIwNjgsLTE2LjUzMjU3IDIzLC0yMyBsIDAsLTg5LjgxMjUgeiBtIDEyOCwwIDAsODkuODEyNSBjIDguNzc5MzIsNi40Njc0MyAxNi41MzMwMywxNC4yMjI5MiAyMywyMyBsIDg5Ljg0Mzc1LDAgQyA0MTMuODk1NTYsMTM5LjY1NzMzIDM3Mi4zNDg2Myw5OC4xMzU0MDMgMzIwLDc5LjE4NzUgeiBNIDc5LjE1NjI1LDMyMCBDIDk4LjEwNDQ0NCwzNzIuMzQyNjcgMTM5LjY1MTM3LDQxMy44NjQ2IDE5Miw0MzIuODEyNSBMIDE5MiwzNDMgYyAtOC43NzkzMiwtNi40Njc0MyAtMTYuNTMzMDMsLTE0LjIyMjkyIC0yMywtMjMgbCAtODkuODQzNzUsMCB6IE0gMzQzLDMyMCBjIC02LjQ2NzQzLDguNzc5MzIgLTE0LjIyMjkyLDE2LjUzMzAzIC0yMywyMyBsIDAsODkuODQzNzUgQyAzNzIuMzQyNjcsNDEzLjg5NTU2IDQxMy44NjQ2LDM3Mi4zNDg2MyA0MzIuODEyNSwzMjAgTCAzNDMsMzIwIHoiCiAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsNTQwLjM2MjE4KSIKICAgICAgICAgaWQ9ImFybW9yIgogICAgICAgICBzdHlsZT0iZmlsbDojYWZhZmFmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojMDAwMDAwO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8L2c+CiAgICA8cGF0aAogICAgICAgZD0ibSA0OTYsNzk2LjM2MjE4IGMgMCwxMzIuNTQ4MzQgLTEwNy40NTE2NiwyNDAuMDAwMDIgLTI0MCwyNDAuMDAwMDIgLTEzMi41NDgzNCwwIC0yNDAsLTEwNy40NTE2OCAtMjQwLC0yNDAuMDAwMDIgMCwtMTMyLjU0ODM0IDEwNy40NTE2NiwtMjQwIDI0MCwtMjQwIDEzMi41NDgzNCwwIDI0MCwxMDcuNDUxNjYgMjQwLDI0MCB6IgogICAgICAgaWQ9ImV4cGxvc2lvbiIKICAgICAgIHN0eWxlPSJmaWxsOnVybCgjcmFkaWFsR3JhZGllbnQ0ODc2KTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbjtmaWx0ZXI6dXJsKCNmaWx0ZXI0OTMwKSIgLz4KICA8L2c+Cjwvc3ZnPgo=`)
]).then(([playerImg, bulletImg, enemyBulletImg, enemyImg]) => {
  assets.player = playerImg;
  assets.bullet = bulletImg;
  assets.enemyBullet = enemyBulletImg;
  assets.enemy = enemyImg;
  start();
});

let canvas = document.getElementById('game');
let ctx = canvas.getContext('2d');
let keys = {};
let bullets = [];
let enemyBullets = [];
let enemies = [];
let freedShips = [];
let player;
let enemyDirection = 1;
let boss;
let lives = 2;
let running = true;

class Player {
  constructor() {
    this.image = assets.player;
    this.width = this.image.width;
    this.height = this.image.height;
    this.x = SCREEN_WIDTH / 2 - this.width / 2;
    this.y = SCREEN_HEIGHT - this.height - 10;
    this.double = false;
    this.alive = true;
  }
  update() {
    if (keys['ArrowLeft']) this.x -= PLAYER_SPEED;
    if (keys['ArrowRight']) this.x += PLAYER_SPEED;
    this.x = Math.max(0, Math.min(this.x, SCREEN_WIDTH - this.width));
  }
  shoot() {
    if (this.double) {
      bullets.push(new Bullet(this.x + this.width/2 - 10, this.y));
      bullets.push(new Bullet(this.x + this.width/2 + 10, this.y));
    } else {
      bullets.push(new Bullet(this.x + this.width/2, this.y));
    }
  }
  draw() { ctx.drawImage(this.image, this.x, this.y); }
  rect() { return {x:this.x,y:this.y,width:this.width,height:this.height}; }
}

class Bullet {
  constructor(x,y) {
    this.image = assets.bullet;
    this.x = x - this.image.width/2;
    this.y = y;
    this.width = this.image.width;
    this.height = this.image.height;
  }
  update() { this.y += BULLET_SPEED; }
  draw() { ctx.drawImage(this.image, this.x, this.y); }
  rect() { return {x:this.x,y:this.y,width:this.width,height:this.height}; }
}

class EnemyBullet {
  constructor(x,y) {
    this.image = assets.enemyBullet;
    this.x = x - this.image.width/2;
    this.y = y;
    this.width = this.image.width;
    this.height = this.image.height;
  }
  update() { this.y += ENEMY_BULLET_SPEED; }
  draw() { ctx.drawImage(this.image, this.x, this.y); }
  rect() { return {x:this.x,y:this.y,width:this.width,height:this.height}; }
}

class Enemy {
  constructor(x,y,isBoss) {
    this.baseImage = assets.enemy;
    this.image = this.baseImage;
    this.width = this.image.width;
    this.height = this.image.height;
    this.x = x;
    this.y = y;
    this.startX = x;
    this.startY = y;
    this.isBoss = isBoss;
    this.capturing = false;
    this.capture_stationary = false;
    this.capture_timer = 0;
    this.has_player = false;
    this.diving = false;
    this.dive_dir = 1;
    this.angle = 0;
  }
  startDive() {
    if (!this.capturing && !this.diving) {
      let center = this.x + this.width/2;
      let playerCenter = player.x + player.width/2;
      this.diving = true;
      this.dive_dir = center < playerCenter ? 1 : -1;
      this.angle = 0;
    }
  }
  update(direction) {
    if (this.capturing) {
      if (this.capture_stationary) {
        this.capture_timer++;
        if (this.capture_timer > 120) {
          this.capturing = false;
          this.capture_stationary = false;
          this.capture_timer = 0;
          if (this.y > this.startY) {
            this.x = this.startX;
            this.y = this.startY;
          }
        }
      } else if (this.has_player) {
        if (this.y > this.startY) {
          this.y -= CAPTURE_SPEED;
        } else {
          this.capturing = false;
        }
      } else {
        this.y += CAPTURE_SPEED;
      }
    } else if (this.diving) {
      this.x += this.dive_dir * ENEMY_SPEED;
      this.y += DIVE_SPEED;
      this.angle = (this.angle + 5) % 360;
      if (Math.random() < 0.02) {
        enemyBullets.push(new EnemyBullet(this.x + this.width/2, this.y + this.height));
      }
      if (this.has_player && this.y > SCREEN_HEIGHT/3 && !this.capturing) {
        this.diving = false;
        this.capturing = true;
        this.capture_stationary = true;
        this.angle = 0;
      } else if (this.y > SCREEN_HEIGHT) {
        this.diving = false;
        this.angle = 0;
        this.x = this.startX;
        this.y = this.startY;
      }
    } else {
      this.x += ENEMY_SPEED * direction;
    }
  }
  draw() {
    ctx.save();
    ctx.translate(this.x + this.width/2, this.y + this.height/2);
    ctx.rotate(this.angle * Math.PI/180);
    ctx.drawImage(this.baseImage, -this.width/2, -this.height/2);
    ctx.restore();
  }
  rect() { return {x:this.x,y:this.y,width:this.width,height:this.height}; }
}

class FreedShip {
  constructor(x,y) {
    this.x = x - assets.player.width/2;
    this.y = y;
    this.width = assets.player.width;
    this.height = assets.player.height;
  }
  update() {
    this.y += CAPTURE_SPEED;
    if (this.y + this.height >= SCREEN_HEIGHT - 10) {
      player.double = true;
      freedShips.splice(freedShips.indexOf(this),1);
    }
  }
  draw() { ctx.drawImage(assets.player, this.x, this.y); }
  rect() { return {x:this.x,y:this.y,width:this.width,height:this.height}; }
}

function rectsIntersect(a,b) {
  return !(a.x+a.width < b.x || a.x > b.x+b.width || a.y+a.height < b.y || a.y > b.y+b.height);
}

function start() {
  player = new Player();
  for (let i=0;i<8;i++) {
    let enemy = new Enemy(80*i+50, 50, i===0);
    enemies.push(enemy);
  }
  boss = enemies[0];
  document.addEventListener('keydown', e=>{
    if (e.code === 'Space') player.shoot();
    keys[e.key] = true;
  });
  document.addEventListener('keyup', e=>{ keys[e.key] = false; });
  requestAnimationFrame(loop);
}

function loop() {
  if (!running) return;
  update();
  render();
  requestAnimationFrame(loop);
}

function update() {
  if (player.alive) player.update();
  bullets.forEach(b=>b.update());
  enemyBullets.forEach(b=>b.update());
  freedShips.forEach(s=>s.update());

  let moveDown = false;
  enemies.forEach(e=>{
    e.update(enemyDirection);
    if (e.x + e.width > SCREEN_WIDTH || e.x < 0) moveDown = true;
  });
  if (moveDown) {
    enemyDirection *= -1;
    enemies.forEach(e=>{ e.y += 20; });
  }
  const available = enemies.filter(e=>!e.diving && !e.capturing);
  if (available.length && Math.random() < DIVE_PROBABILITY) {
    available[Math.floor(Math.random()*available.length)].startDive();
  }
  if (boss.isBoss && !boss.capturing && !boss.has_player) {
    let aligned = Math.abs((boss.x+boss.width/2) - (player.x+player.width/2)) < CAPTURE_ALIGN_DISTANCE;
    if (aligned && boss.y <= boss.startY) boss.capturing = true;
  }

  let beamRects = [];
  enemies.forEach(enemy=>{
    if (enemy.capturing) {
      beamRects.push({x:enemy.x+enemy.width/2-10,y:enemy.y+enemy.height,width:20,height:SCREEN_HEIGHT-(enemy.y+enemy.height),enemy});
    }
  });

  beamRects.forEach(b=>{
    if (player.alive && rectsIntersect(player.rect(), b)) {
      if (!b.enemy.has_player) b.enemy.has_player = true;
      lives--;
      player.alive = false;
      if (lives > 0) {
        player = new Player();
      } else {
        running = false;
      }
    }
  });

  if (player.alive) {
    enemyBullets = enemyBullets.filter(b=>{
      if (rectsIntersect(player.rect(), b.rect())) {
        lives--;
        player.alive = false;
        if (lives > 0) {
          player = new Player();
        } else {
          running = false;
        }
        return false;
      }
      return b.y <= SCREEN_HEIGHT;
    });
  }

  bullets = bullets.filter(b=>b.y + b.height > 0);
  enemyBullets = enemyBullets.filter(b=>b.y < SCREEN_HEIGHT);

  let hits = [];
  bullets.forEach(b=>{
    enemies.forEach(enemy=>{
      if (rectsIntersect(b.rect(), enemy.rect())) {
        hits.push({bullet:b, enemy});
      }
    });
  });
  hits.forEach(h=>{
    bullets.splice(bullets.indexOf(h.bullet),1);
    if (h.enemy.has_player) {
      freedShips.push(new FreedShip(h.enemy.x + h.enemy.width/2, h.enemy.y + h.enemy.height));
    }
    enemies.splice(enemies.indexOf(h.enemy),1);
  });

  freedShips = freedShips.filter(s=>true);
}

function render() {
  ctx.clearRect(0,0,SCREEN_WIDTH,SCREEN_HEIGHT);
  bullets.forEach(b=>b.draw());
  enemyBullets.forEach(b=>b.draw());
  enemies.forEach(e=>{ e.draw();
    if (e.has_player) {
      ctx.drawImage(assets.player, e.x + e.width/2 - assets.player.width/2, e.y + e.height);
    }
    if (e.capturing) {
      ctx.fillStyle = 'cyan';
      ctx.fillRect(e.x+e.width/2-10, e.y+e.height, 20, SCREEN_HEIGHT-(e.y+e.height));
    }
  });
  freedShips.forEach(s=>s.draw());
  if (player.alive) player.draw();
  for (let i=0;i<lives;i++) {
    ctx.drawImage(assets.player, 10 + i*(assets.player.width+10), SCREEN_HEIGHT - assets.player.height - 5, 30, 20);
  }
}
</script>
</body>
</html>
